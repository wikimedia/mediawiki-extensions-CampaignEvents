-- This file is automatically generated using maintenance/generateSchemaSql.php.
-- Source: db_patches/tables.json
-- Do not modify this file directly.
-- See https://www.mediawiki.org/wiki/Manual:Schema_changes
CREATE TABLE /*_*/campaign_events (
  event_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  event_name VARBINARY(255) NOT NULL,
  event_page_namespace INT UNSIGNED NOT NULL,
  event_page_title VARBINARY(255) NOT NULL,
  event_page_wiki VARBINARY(64) NOT NULL,
  event_page_prefixedtext VARBINARY(512) NOT NULL,
  event_chat_url BLOB NOT NULL,
  event_status INT NOT NULL,
  event_timezone VARBINARY(64) NOT NULL,
  event_start_local BINARY(14) NOT NULL,
  event_start_utc BINARY(14) NOT NULL,
  event_end_local BINARY(14) NOT NULL,
  event_end_utc BINARY(14) NOT NULL,
  event_types INT DEFAULT 0 NOT NULL,
  event_track_contributions TINYINT(1) DEFAULT 0 NOT NULL,
  event_meeting_type INT NOT NULL,
  event_meeting_url BLOB NOT NULL,
  event_created_at BINARY(14) NOT NULL,
  event_last_edit BINARY(14) NOT NULL,
  event_deleted_at BINARY(14) DEFAULT NULL,
  event_is_test_event TINYINT(1) DEFAULT 0 NOT NULL,
  UNIQUE INDEX event_page (
    event_page_wiki, event_page_namespace,
    event_page_title
  ),
  INDEX event_id_deleted (event_id, event_deleted_at),
  INDEX event_timezone_id (event_timezone, event_id),
  PRIMARY KEY(event_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_participants (
  cep_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  cep_event_id BIGINT UNSIGNED NOT NULL,
  cep_user_id INT UNSIGNED NOT NULL,
  cep_private TINYINT(1) NOT NULL,
  cep_registered_at BINARY(14) NOT NULL,
  cep_unregistered_at BINARY(14) DEFAULT NULL,
  cep_first_answer_timestamp BINARY(14) DEFAULT NULL,
  cep_aggregation_timestamp BINARY(14) DEFAULT NULL,
  UNIQUE INDEX cep_event_participant (cep_event_id, cep_user_id),
  INDEX cep_event_unregistered (
    cep_event_id, cep_unregistered_at
  ),
  INDEX cep_user_unregistered_event (
    cep_user_id, cep_unregistered_at,
    cep_event_id
  ),
  PRIMARY KEY(cep_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_organizers (
  ceo_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceo_event_id BIGINT UNSIGNED NOT NULL,
  ceo_user_id INT UNSIGNED NOT NULL,
  ceo_roles BIGINT UNSIGNED NOT NULL,
  ceo_created_at BINARY(14) NOT NULL,
  ceo_deleted_at BINARY(14) DEFAULT NULL,
  ceo_agreement_timestamp BINARY(14) DEFAULT NULL,
  UNIQUE INDEX ceo_event_user (ceo_event_id, ceo_user_id),
  INDEX ceo_user_event (ceo_user_id, ceo_event_id),
  PRIMARY KEY(ceo_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_address (
  cea_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  cea_full_address BLOB NOT NULL,
  cea_country VARBINARY(255) DEFAULT NULL,
  cea_country_code BINARY(2) DEFAULT NULL,
  INDEX cea_country_code (cea_country_code),
  PRIMARY KEY(cea_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_event_address (
  ceea_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceea_event BIGINT UNSIGNED NOT NULL,
  ceea_address BIGINT UNSIGNED NOT NULL,
  UNIQUE INDEX ceea_event_address (ceea_event, ceea_address),
  PRIMARY KEY(ceea_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_tracking_tools (
  cett_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  cett_event BIGINT UNSIGNED NOT NULL,
  cett_tool_id INT NOT NULL,
  cett_tool_event_id VARBINARY(512) NOT NULL,
  cett_sync_status INT NOT NULL,
  cett_last_sync BINARY(14) DEFAULT NULL,
  UNIQUE INDEX cett_event_tool_teid (
    cett_event, cett_tool_id, cett_tool_event_id
  ),
  PRIMARY KEY(cett_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_event_questions (
  ceeq_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceeq_event_id BIGINT UNSIGNED NOT NULL,
  ceeq_question_id INT UNSIGNED NOT NULL,
  UNIQUE INDEX ceeq_event_question (ceeq_event_id, ceeq_question_id),
  PRIMARY KEY(ceeq_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_question_answers (
  ceqa_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceqa_event_id BIGINT UNSIGNED NOT NULL,
  ceqa_user_id INT UNSIGNED NOT NULL,
  ceqa_question_id INT UNSIGNED NOT NULL,
  ceqa_answer_option INT UNSIGNED DEFAULT NULL,
  ceqa_answer_text BLOB DEFAULT NULL,
  UNIQUE INDEX ceqa_event_user_question (
    ceqa_event_id, ceqa_user_id, ceqa_question_id
  ),
  PRIMARY KEY(ceqa_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_question_aggregation (
  ceqag_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceqag_event_id BIGINT UNSIGNED NOT NULL,
  ceqag_question_id INT UNSIGNED NOT NULL,
  ceqag_answer_option INT UNSIGNED NOT NULL,
  ceqag_answers_amount INT UNSIGNED NOT NULL,
  UNIQUE INDEX ceqag_event_question_option (
    ceqag_event_id, ceqag_question_id,
    ceqag_answer_option
  ),
  PRIMARY KEY(ceqag_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_invitation_lists (
  ceil_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceil_name VARBINARY(255) NOT NULL,
  ceil_event_id BIGINT UNSIGNED DEFAULT NULL,
  ceil_status INT NOT NULL,
  ceil_user_id INT NOT NULL,
  ceil_wiki VARBINARY(64) NOT NULL,
  ceil_created_at BINARY(14) NOT NULL,
  INDEX ce_invitation_lists_event_id (ceil_event_id),
  INDEX ce_invitation_lists_wiki (ceil_wiki),
  INDEX ce_invitation_lists_user_wiki (ceil_user_id, ceil_wiki),
  PRIMARY KEY(ceil_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_worklist_articles (
  cewa_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  cewa_page_id INT UNSIGNED NOT NULL,
  cewa_page_title VARBINARY(255) NOT NULL,
  cewa_ceil_id BIGINT UNSIGNED NOT NULL,
  INDEX ce_worklist_articles_ceil_id (cewa_ceil_id),
  PRIMARY KEY(cewa_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_invitation_list_users (
  ceilu_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceilu_user_id INT NOT NULL,
  ceilu_ceil_id BIGINT UNSIGNED NOT NULL,
  ceilu_score INT NOT NULL,
  INDEX ce_invitation_list_users_ceil_id (ceilu_ceil_id),
  INDEX ce_invitation_list_users_ceilu_user_id (ceilu_user_id),
  PRIMARY KEY(ceilu_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_event_wikis (
  ceew_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceew_event_id BIGINT UNSIGNED NOT NULL,
  ceew_wiki VARBINARY(64) NOT NULL,
  UNIQUE INDEX ce_event_wikis_event_id_wiki (ceew_event_id, ceew_wiki),
  PRIMARY KEY(ceew_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_event_topics (
  ceet_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  ceet_event_id BIGINT UNSIGNED NOT NULL,
  ceet_topic VARBINARY(64) NOT NULL,
  UNIQUE INDEX ce_event_topics_event_id_topic (ceet_event_id, ceet_topic),
  PRIMARY KEY(ceet_id)
) /*$wgDBTableOptions*/;


CREATE TABLE /*_*/ce_event_contributions (
  cec_id BIGINT UNSIGNED AUTO_INCREMENT NOT NULL,
  cec_event_id BIGINT UNSIGNED NOT NULL,
  cec_user_id BIGINT UNSIGNED NOT NULL,
  cec_user_name VARBINARY(255) DEFAULT NULL,
  cec_wiki VARCHAR(64) NOT NULL,
  cec_page_id INT UNSIGNED NOT NULL,
  cec_page_prefixedtext VARBINARY(512) NOT NULL,
  cec_revision_id BIGINT UNSIGNED NOT NULL,
  cec_edit_flags INT NOT NULL,
  cec_bytes_delta INT NOT NULL,
  cec_links_delta SMALLINT NOT NULL,
  cec_timestamp BINARY(14) NOT NULL,
  cec_deleted TINYINT(1) NOT NULL,
  INDEX cec_wiki_page_id (cec_wiki, cec_page_id),
  INDEX cec_event_user (cec_event_id, cec_user_id),
  INDEX cec_user_id_name (cec_user_id, cec_user_name),
  PRIMARY KEY(cec_id)
) /*$wgDBTableOptions*/;
