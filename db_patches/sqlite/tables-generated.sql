-- This file is automatically generated using maintenance/generateSchemaSql.php.
-- Source: db_patches/tables.json
-- Do not modify this file directly.
-- See https://www.mediawiki.org/wiki/Manual:Schema_changes
CREATE TABLE /*_*/campaign_events (
  event_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  event_name BLOB NOT NULL, event_page_namespace INTEGER UNSIGNED NOT NULL,
  event_page_title BLOB NOT NULL, event_page_wiki BLOB NOT NULL,
  event_chat_url BLOB NOT NULL, event_tracking_tool BLOB NOT NULL,
  event_tracking_url BLOB NOT NULL,
  event_status INTEGER NOT NULL, event_start BLOB NOT NULL,
  event_end BLOB NOT NULL, event_type BLOB NOT NULL,
  event_meeting_type INTEGER NOT NULL,
  event_meeting_url BLOB NOT NULL, event_meeting_country BLOB NOT NULL,
  event_meeting_address BLOB NOT NULL,
  event_created_at BLOB NOT NULL, event_last_edit BLOB NOT NULL,
  event_deleted_at BLOB DEFAULT NULL
);

CREATE UNIQUE INDEX event_page ON /*_*/campaign_events (
  event_page_wiki, event_page_namespace,
  event_page_title
);


CREATE TABLE /*_*/ce_participants (
  cep_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  cep_event_id BIGINT UNSIGNED NOT NULL,
  cep_user_id INTEGER UNSIGNED NOT NULL,
  cep_unregistered_at BLOB DEFAULT NULL
);

CREATE UNIQUE INDEX cep_event_participant ON /*_*/ce_participants (cep_event_id, cep_user_id);


CREATE TABLE /*_*/ce_organizers (
  ceo_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  ceo_event_id BIGINT UNSIGNED NOT NULL,
  ceo_user_id INTEGER UNSIGNED NOT NULL,
  ceo_role_id BIGINT UNSIGNED NOT NULL
);

CREATE UNIQUE INDEX ceo_event_user_role ON /*_*/ce_organizers (
  ceo_event_id, ceo_user_id, ceo_role_id
);
