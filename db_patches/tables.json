[
	{
		"name": "campaign_events",
		"comment": "Stores all the event information",
		"columns": [
			{
				"name": "event_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "event_name",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_page_namespace",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "event_page_title",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_page_wiki",
				"comment": "The Wiki ID the page is stored.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 64
				}
			},
			{
				"name": "event_page_prefixedtext",
				"comment": "The full prefixedtext of the event page. This is needed for the crosswikiness, see T307358.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 512
				}
			},
			{
				"name": "event_chat_url",
				"comment": "The link of the chat tool the organizers use to communicate.",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_tracking_tool_id",
				"comment": "The unique ID of the tracking tool the organizers use, as defined by the application.",
				"type": "integer",
				"options": {
					"notnull": false
				}
			},
			{
				"name": "event_tracking_tool_event_id",
				"comment": "The unique identifier of the event within the tracking tool.",
				"type": "blob",
				"options": {
					"notnull": false,
					"length": 65530
				}
			},
			{
				"name": "event_status",
				"comment": "Status of the event. 1: Open. 2: Closed. 3: Draft. 4: Canceled.",
				"type": "integer",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_timezone",
				"comment": "Timezone of the event, used with event_start_local and event_end_local.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 64
				}
			},
			{
				"name": "event_start_local",
				"comment": "Start time of the event, in the local timezone (stored in event_timezone), in the TS_MW format. This does not use mwtimestamp because that is only intended for UTC time.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 14,
					"fixed": true
				}
			},
			{
				"name": "event_start_utc",
				"comment": "Start time of the event, in UTC. This value is derived from event_start_local, and is used for sorting.",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_end_local",
				"comment": "End time of the event, in the local timezone (stored in event_timezone), in the TS_MW format. This does not use mwtimestamp because that is only intended for UTC time.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 14,
					"fixed": true
				}
			},
			{
				"name": "event_end_utc",
				"comment": "End time of the event, in UTC. This value is derived from event_end_local, and is used for sorting.",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_type",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_meeting_type",
				"comment": "The type of the meeting. 1: In person. 2: Online. 3: Both",
				"type": "integer",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_meeting_url",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_created_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_last_edit",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_deleted_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "event_page",
				"columns": [ "event_page_wiki", "event_page_namespace", "event_page_title" ],
				"unique": true,
				"comment": "Used when querying events by pages. The index is currently unique, but this may change in the future."
			},
			{
				"name": "event_id_deleted",
				"unique": false,
				"columns": [ "event_id", "event_deleted_at" ]
			},
			{
				"name": "event_timezone_id",
				"unique": false,
				"columns": [ "event_timezone", "event_id" ],
				"comment": "Used when updating UTC timestamps, filtering by timezone and batching by primary key."
			}
		],
		"pk": [ "event_id" ]
	},
	{
		"name": "ce_participants",
		"comment": "Stores the participants of an event.",
		"columns": [
			{
				"name": "cep_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_event_id",
				"comment": "Gets the event id from campaign_events table.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_user_id",
				"comment": "The Central ID.",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_registered_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "cep_unregistered_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "cep_event_participant",
				"columns": [ "cep_event_id", "cep_user_id" ],
				"unique": true,
				"comment": "Uniqueness constraint, used in queries where we need the event first."
			},
			{
				"name": "cep_event_unregistered",
				"columns": [ "cep_event_id", "cep_unregistered_at" ],
				"unique": false,
				"comment": "For COUNT measurements."
			},
			{
				"name": "cep_user_unregistered_event",
				"columns": [ "cep_user_id", "cep_unregistered_at", "cep_event_id" ],
				"unique": false,
				"comment": "For JOINs."
			}
		],
		"pk": [ "cep_id" ]
	},
	{
		"name": "ce_organizers",
		"comment": "Stores the organizers of an event.",
		"columns": [
			{
				"name": "ceo_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_event_id",
				"comment": "Gets the event id from campaign_events table.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_user_id",
				"comment": "The Central ID.",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_roles",
				"comment": "Bit set of the roles that the organizer has for a specific event.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_created_at",
				"comment": "Timestamp of when the user first became an organizer.",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "ceo_deleted_at",
				"comment": "Timestamp of when the user stopped being an organizer.",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "ceo_event_user",
				"columns": [ "ceo_event_id", "ceo_user_id" ],
				"unique": true,
				"comment": "Uniqueness constraint, used when retrieving the organizers of an event."
			},
			{
				"name": "ceo_user_event",
				"columns": [ "ceo_user_id", "ceo_event_id" ],
				"unique": false,
				"comment": "Used for JOINs."
			}
		],
		"pk": [ "ceo_id" ]
	},
	{
		"name": "ce_address",
		"comment": "Stores known event addresses.",
		"columns": [
			{
				"name": "cea_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "cea_full_address",
				"comment": "Full address of the event.",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "cea_country",
				"comment": "Event country.",
				"type": "binary",
				"options": {
					"notnull": false,
					"length": 255
				}
			}
		],
		"indexes": [
		],
		"pk": [ "cea_id" ]
	},
	{
		"name": "ce_event_address",
		"comment": "Stores the id of the event and the id of an address.",
		"columns": [
			{
				"name": "ceea_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "ceea_event",
				"comment": "The id of the event on campaign_events.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceea_address",
				"comment": "The id of the address on ce_address.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			}
		],
		"indexes": [
			{
				"name": "ceea_event_address",
				"columns": [ "ceea_event", "ceea_address" ],
				"unique": true,
				"comment": "Used when querying event address."
			}
		],
		"pk": [ "ceea_id" ]
	}
]
