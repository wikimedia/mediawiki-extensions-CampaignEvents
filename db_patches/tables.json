[
	{
		"name": "campaign_events",
		"comment": "Stores all the event information",
		"columns": [
			{
				"name": "event_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "event_name",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_page_namespace",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "event_page_title",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_page_wiki",
				"comment": "The Wiki ID the page is stored.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 64
				}
			},
			{
				"name": "event_page_prefixedtext",
				"comment": "The full prefixedtext of the event page. This is needed for the crosswikiness, see T307358.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 512
				}
			},
			{
				"name": "event_chat_url",
				"comment": "The link of the chat tool the organizers use to communicate.",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_tracking_tool",
				"comment": "The name of the tracking tool the organizers use. Example: EventMetrics, P&E Dashboard.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_tracking_url",
				"comment": "The link of the tracking tool used by organizers.",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_status",
				"comment": "Status of the event. 1: Open. 2: Closed. 3: Draft. 4: Canceled.",
				"type": "integer",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_start",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_end",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_type",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_meeting_type",
				"comment": "The type of the meeting. 1: In person. 2: Online. 3: Both",
				"type": "integer",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_meeting_url",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_meeting_country",
				"comment": "The country of the event.",
				"type": "binary",
				"options": {
					"notnull": true,
					"length": 255
				}
			},
			{
				"name": "event_meeting_address",
				"comment": "The complete address of the event.",
				"type": "blob",
				"options": {
					"notnull": true,
					"length": 65530
				}
			},
			{
				"name": "event_created_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_last_edit",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "event_deleted_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "event_page",
				"columns": [ "event_page_wiki", "event_page_namespace", "event_page_title" ],
				"unique": true,
				"comment": "Used when querying events by pages. The index is currently unique, but this may change in the future."
			},
			{
				"name": "event_id_deleted",
				"unique": false,
				"columns": [ "event_id", "event_deleted_at" ]
			}
		],
		"pk": [ "event_id" ]
	},
	{
		"name": "ce_participants",
		"comment": "Stores the participants of an event.",
		"columns": [
			{
				"name": "cep_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_event_id",
				"comment": "Gets the event id from campaign_events table.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_user_id",
				"comment": "The Central ID.",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "cep_registered_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "cep_unregistered_at",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "cep_event_participant",
				"columns": [ "cep_event_id", "cep_user_id" ],
				"unique": true,
				"comment": "Uniqueness constraint, used in queries where we need the event first."
			},
			{
				"name": "cep_event_unregistered",
				"columns": [ "cep_event_id", "cep_unregistered_at" ],
				"unique": false,
				"comment": "For COUNT measurements."
			},
			{
				"name": "cep_user_unregistered_event",
				"columns": [ "cep_user_id", "cep_unregistered_at", "cep_event_id" ],
				"unique": false,
				"comment": "For JOINs."
			}
		],
		"pk": [ "cep_id" ]
	},
	{
		"name": "ce_organizers",
		"comment": "Stores the organizers of an event.",
		"columns": [
			{
				"name": "ceo_id",
				"type": "bigint",
				"options": {
					"notnull": true,
					"autoincrement": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_event_id",
				"comment": "Gets the event id from campaign_events table.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_user_id",
				"comment": "The Central ID.",
				"type": "integer",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_role_id",
				"comment": "ID of the role, as determined by the application.",
				"type": "bigint",
				"options": {
					"notnull": true,
					"unsigned": true
				}
			},
			{
				"name": "ceo_created_at",
				"comment": "Timestamp of when the user first became an organizer in this role.",
				"type": "mwtimestamp",
				"options": {
					"notnull": true
				}
			},
			{
				"name": "ceo_deleted_at",
				"comment": "Timestamp of when the user stopped being an organizer in this role.",
				"type": "mwtimestamp",
				"options": {
					"notnull": false
				}
			}
		],
		"indexes": [
			{
				"name": "ceo_event_user_role",
				"columns": [ "ceo_event_id", "ceo_user_id", "ceo_role_id" ],
				"unique": true,
				"comment": "Uniqueness constraint, used when retrieving the organizers of an event."
			},
			{
				"name": "ceo_user_event",
				"columns": [ "ceo_user_id", "ceo_event_id" ],
				"unique": false,
				"comment": "Used for JOINs."
			}
		],
		"pk": [ "ceo_id" ]
	}
]
